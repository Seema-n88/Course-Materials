-------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\...\inventories.log
  log type:  text
 opened on:  19 Nov 2012, 13:37:52

. 
. describe

Contains data from C:\...\inventories.dta
  obs:            60                          
 vars:             1                          26 May 2010 12:47
 size:           480 (99.9% of memory free)
-------------------------------------------------------------------------------------------------------------------------------
              storage  display     value
variable name   type   format      label      variable label
-------------------------------------------------------------------------------------------------------------------------------
inventories     float  %9.1f                  Change in business inventories (1955q1-1969q4)
-------------------------------------------------------------------------------------------------------------------------------
Sorted by:  

. 
. generate time = _n-21

. format time %tq

. tsset time
        time variable:  time, 1955q1 to 1969q4
                delta:  1 quarter

. 
. tsline inventories, lwidth(thick)

. 
. ac inventories, lags(15)

. pac inventories, lags(15)

. 
. corrgram inventories

                                          -1       0       1 -1       0       1
 LAG       AC       PAC      Q     Prob>Q  [Autocorrelation]  [Partial Autocor]
-------------------------------------------------------------------------------
1        0.6897   0.6898   29.996  0.0000          |-----             |-----   
2        0.5274   0.1067   47.837  0.0000          |----              |        
3        0.4471   0.1053   60.883  0.0000          |---               |        
4        0.3301  -0.0689   68.121  0.0000          |--                |        
5        0.3297   0.1665   75.471  0.0000          |--                |-       
6        0.2913  -0.0014   81.316  0.0000          |--                |        
7        0.2439   0.0141    85.49  0.0000          |-                 |        
8        0.2114  -0.0237   88.689  0.0000          |-                 |        
9        0.2112   0.1221   91.941  0.0000          |-                 |        
10       0.2950   0.2765   98.415  0.0000          |--                |--      
11       0.3387   0.0823   107.12  0.0000          |--                |        
12       0.3075  -0.0181   114.45  0.0000          |--                |        
13       0.2682   0.1228   120.15  0.0000          |--                |        
14       0.1419  -0.1110   121.77  0.0000          |-                 |        
15       0.0554  -0.1467   122.03  0.0000          |                 -|        
16       0.0373   0.0301   122.14  0.0000          |                  |        
17       0.0123   0.0995   122.16  0.0000          |                  |        
18       0.0087   0.0281   122.16  0.0000          |                  |        
19      -0.0486  -0.1093   122.38  0.0000          |                  |        
20      -0.0798  -0.0891   122.97  0.0000          |                  |        
21      -0.1431  -0.3864   124.92  0.0000         -|               ---|        
22      -0.1849  -0.3524   128.27  0.0000         -|                --|        
23      -0.1600  -0.1450   130.84  0.0000         -|                 -|        
24      -0.1369   0.1492   132.78  0.0000         -|                  |-       
25      -0.0628   0.6726    133.2  0.0000          |                  |-----   
26      -0.1176   0.5427   134.71  0.0000          |                  |----    
27      -0.1329  -1.1120   136.71  0.0000         -|          --------|        
28      -0.1419  -0.9323   139.05  0.0000         -|           -------|        

. sum inventories

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
 inventories |        60       6.095    4.597362       -5.1       17.4

. di 6.095*(1-0.6897)
1.8912785

. 
. regress inventories L1.inventories

      Source |       SS       df       MS              Number of obs =      59
-------------+------------------------------           F(  1,    57) =   51.96
       Model |   593.26957     1   593.26957           Prob > F      =  0.0000
    Residual |  650.817213    57  11.4178458           R-squared     =  0.4769
-------------+------------------------------           Adj R-squared =  0.4677
       Total |  1244.08678    58  21.4497721           Root MSE      =   3.379

------------------------------------------------------------------------------
 inventories |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 inventories |
         L1. |   .6897525   .0956884     7.21   0.000     .4981398    .8813652
             |
       _cons |   1.920915   .7303908     2.63   0.011     .4583325    3.383497
------------------------------------------------------------------------------

. di 1.9209/(1-0.6898)
6.1924565

. predict res_AR1_OLS, res
(1 missing value generated)

. predict inventories_hat_OLS, xb
(1 missing value generated)

. format inventories_hat_OLS %9.2f

. list time inventories inventories_hat_OLS in 1/8, abbreviate(4) noo

  +------------------------+
  |   time   inv~s   inv~S |
  |------------------------|
  | 1955q1     4.4       . |
  | 1955q2     5.8    4.96 |
  | 1955q3     6.7    5.92 |
  | 1955q4     7.1    6.54 |
  | 1956q1     5.7    6.82 |
  |------------------------|
  | 1956q2     4.1    5.85 |
  | 1956q3     4.6    4.75 |
  | 1956q4     4.3    5.09 |
  +------------------------+

. tsline inventories inventories_hat_OLS, lwidth(thick thick) legend(label(1 "inventories") label(2 "inventories_hat_OLS") rows
> (2))

. 
. twoway scatter inventories L.inventories || line inventories_hat_OLS L.inventories, legend(off) name(regression, replace) ///
> xtitle("L.inventories") ytitle("inventories") lwidth(thick)

. twoway scatter res_AR1_OLS L.inventories, name(residuals, replace) ytitle("res_AR1_OLS") xtitle("L.inventories")

. graph combine regression residuals, rows(2) 

. 
. gen res_AR1_OLS_squared = res_AR1_OLS^2
(1 missing value generated)

. sum res_AR1_OLS_squared

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
res_AR1_OL~d |        59     11.0308    14.54747    .006652   76.55312

. di r(sum)/57
11.417846

. 
. arima inventories, ar(1)

(setting optimization to BHHH)
Iteration 0:   log likelihood = -157.05066  
Iteration 1:   log likelihood = -157.04196  
Iteration 2:   log likelihood = -157.04145  
Iteration 3:   log likelihood = -157.04135  
Iteration 4:   log likelihood = -157.04132  
(switching optimization to BFGS)
Iteration 5:   log likelihood = -157.04132  

ARIMA regression

Sample:  1955q1 - 1969q4                        Number of obs      =        60
                                                Wald chi2(1)       =     60.23
Log likelihood = -157.0413                      Prob > chi2        =    0.0000

------------------------------------------------------------------------------
             |                 OPG
 inventories |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
inventories  |
       _cons |   6.040731   1.379228     4.38   0.000     3.337493    8.743969
-------------+----------------------------------------------------------------
ARMA         |
          ar |
         L1. |   .6803345   .0876654     7.76   0.000     .5085135    .8521554
-------------+----------------------------------------------------------------
      /sigma |   3.297332   .3331842     9.90   0.000     2.644303    3.950361
------------------------------------------------------------------------------

. di 6.0407 *(1-.6803)
1.9312118

. predict inventories_hat_ML, xb

. format inventories_hat_ML %9.2f

. list time inventories inventories_hat_ML in 1/8, abbreviate(4) noo

  +------------------------+
  |   time   inv~s   inv~L |
  |------------------------|
  | 1955q1     4.4    6.04 |
  | 1955q2     5.8    4.92 |
  | 1955q3     6.7    5.88 |
  | 1955q4     7.1    6.49 |
  | 1956q1     5.7    6.76 |
  |------------------------|
  | 1956q2     4.1    5.81 |
  | 1956q3     4.6    4.72 |
  | 1956q4     4.3    5.06 |
  +------------------------+

. tsline inventories inventories_hat_ML, lwidth(thick thick) legend(label(1 "inventories") label(2 "inventories_hat_ML") rows(2
> ))

. 
. predict res_AR1_ML, res

. tsline res_AR1_ML, lwidth(thick) ytitle("res_AR1_ML")

. 
. arima inventories, ar(1/2)

(setting optimization to BHHH)
Iteration 0:   log likelihood = -156.75884  
Iteration 1:   log likelihood = -156.74128  
Iteration 2:   log likelihood = -156.73946  
Iteration 3:   log likelihood = -156.73885  
Iteration 4:   log likelihood = -156.73802  
(switching optimization to BFGS)
Iteration 5:   log likelihood = -156.73766  
Iteration 6:   log likelihood = -156.73637  
Iteration 7:   log likelihood = -156.73637  

ARIMA regression

Sample:  1955q1 - 1969q4                        Number of obs      =        60
                                                Wald chi2(2)       =     62.16
Log likelihood = -156.7364                      Prob > chi2        =    0.0000

------------------------------------------------------------------------------
             |                 OPG
 inventories |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
inventories  |
       _cons |    6.07296   1.531381     3.97   0.000     3.071507    9.074412
-------------+----------------------------------------------------------------
ARMA         |
          ar |
         L1. |   .6080156   .1097436     5.54   0.000     .3929222     .823109
         L2. |   .1031826   .1166612     0.88   0.376     -.125469    .3318343
-------------+----------------------------------------------------------------
      /sigma |   3.280592   .3626976     9.04   0.000     2.569718    3.991466
------------------------------------------------------------------------------

. 
. ac res_AR1_ML, lags(15)

. pac res_AR1_ML, lags(15)

. corrgram res_AR1_ML

                                          -1       0       1 -1       0       1
 LAG       AC       PAC      Q     Prob>Q  [Autocorrelation]  [Partial Autocor]
-------------------------------------------------------------------------------
1       -0.0580  -0.0604   .21226  0.6450          |                  |        
2       -0.0031  -0.0049   .21288  0.8990          |                  |        
3        0.1351   0.1474   1.4044  0.7045          |-                 |-       
4       -0.0869  -0.0786   1.9058  0.7531          |                  |        
5        0.1133   0.1161   2.7742  0.7347          |                  |        
6        0.0685   0.0642   3.0976  0.7965          |                  |        
7        0.0286   0.0747    3.155  0.8703          |                  |        
8       -0.0012  -0.0479   3.1551  0.9242          |                  |        
9       -0.0678  -0.0924   3.4906  0.9416          |                  |        
10       0.1102   0.1590   4.3944  0.9278          |                  |-       
11       0.1624   0.2193   6.3954  0.8457          |-                 |-       
12       0.0698   0.0842   6.7733  0.8722          |                  |        
13       0.1658   0.2572   8.9485  0.7768          |-                 |--      
14      -0.0238   0.1566   8.9945  0.8314          |                  |-       
15      -0.0771  -0.0653   9.4865  0.8507          |                  |        
16       0.0165  -0.0750   9.5096  0.8910          |                  |        
17      -0.0253  -0.0067   9.5651  0.9209          |                  |        
18       0.0713   0.1332   10.015  0.9314          |                  |-       
19      -0.0431   0.0059   10.184  0.9483          |                  |        
20       0.0268   0.1307   10.251  0.9634          |                  |-       
21      -0.0561  -0.0807   10.551  0.9708          |                  |        
22      -0.1227  -0.3087   12.024  0.9569          |                --|        
23      -0.0289  -0.3077   12.108  0.9688          |                --|        
24      -0.0933  -0.3929   13.007  0.9660          |               ---|        
25       0.1549   0.3491   15.558  0.9274          |-                 |--      
26      -0.0738   0.6664   16.153  0.9325          |                  |-----   
27      -0.0342   0.5954   16.285  0.9473          |                  |----    
28       0.0513   1.2539   16.591  0.9562          |                  |--------

. 
. di 60*62*((1/59)*(-0.0580)^2+(1/58)*(-0.0031)^2)
.21271942

. di 1-chi2(2,.21288)
.89902899

. di 1-chi2(1,.21288)
.64451939

. 
. wntestq  res_AR1_ML, lags(15)

Portmanteau test for white noise
---------------------------------------
 Portmanteau (Q) statistic =     9.4865
 Prob > chi2(15)           =     0.8507

. di 1-chi2(15,9.4865)
.85073869

. di 1-chi2(14,9.4865)
.79868101

. 
. di invchi2(15, 0.95)
24.99579

. di invchi2(14, 0.95)
23.684791

. 
. regress inventories L1.inventories if time <= 35

      Source |       SS       df       MS              Number of obs =      55
-------------+------------------------------           F(  1,    53) =   50.34
       Model |  568.936612     1  568.936612           Prob > F      =  0.0000
    Residual |  598.977207    53  11.3014567           R-squared     =  0.4871
-------------+------------------------------           Adj R-squared =  0.4775
       Total |  1167.91382    54  21.6280337           Root MSE      =  3.3618

------------------------------------------------------------------------------
 inventories |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 inventories |
         L1. |   .6977864   .0983462     7.10   0.000     .5005288     .895044
             |
       _cons |   1.810721   .7308342     2.48   0.016     .3448536    3.276589
------------------------------------------------------------------------------

. local phi1 = .6977864

. local delta = 1.810721

. local mu = `delta'/(1-`phi1')

. generate forecast_OLS = .
(60 missing values generated)

. replace forecast_OLS = `phi1'*L.inventories + `delta' in 57
(1 real change made)

. forvalues num = 58/60 {
  2.   replace forecast_OLS = `phi1'*L.forecast_OLS + `delta' in `num'
  3. }
(1 real change made)
(1 real change made)
(1 real change made)

. twoway scatter inventories forecast_OLS time, c(l l) lwidth(medthick medthick) xline(35, lcolor(black) lpattern(dash)) yline(
> `mu')

. 
. list time inventories forecast_OLS in 57/60

     +------------------------------+
     |   time   invent~s   foreca~S |
     |------------------------------|
 57. | 1969q1        8.3   6.765004 |
 58. | 1969q2       10.2   6.531249 |
 59. | 1969q3       13.3   6.368138 |
 60. | 1969q4        6.2   6.254321 |
     +------------------------------+

. di (8.3-6.7650)/8.3
.18493976

. 
. log close
      name:  <unnamed>
       log:  C:\...\inventories.log
  log type:  text
 closed on:  19 Nov 2012, 13:38:05
-------------------------------------------------------------------------------------------------------------------------------
